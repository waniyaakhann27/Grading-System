def grade():
    print("="*70)
    print("   STUDENT GRADING SYSTEM + ACADEMIC INTEGRITY CHECK")
    print("="*70)

    name = input("\nStudent Name (optional): ").strip()
    if name:
        print(f"\nGrading for: {name.upper()}\n")
    else:
        print("\nGrading anonymous student...\n")

    score = 0
    max_score = 8

    print("Core Requirements (Answer yes/no):\n")

    requirements = [
        "Vidyarthi certificate submitted",
        "Great Learning certificate submitted",
        "HackerRank 5-star badge (screenshot proof)",
        "35 Codes Assignment completed & submitted"
    ]

    for i, req in enumerate(requirements, 1):
        ans = input(f"{i}. {req}? → ").strip().lower()
        if ans in ['yes', 'y']:
            score += 1
            print("   ✓ +1 point\n")
        else:
            print("   ✗ No point\n")

    # Extra certificates
    print("Extra Certifications (max 4, 1 point each):")
    extra = 0
    for i in range(1, 5):
        if input(f"   → Extra Certificate {i}/4 submitted? → ").strip().lower() in ['yes', 'y']:
            extra += 1
            print(f"      ✓ Certificate {i} accepted (+1)")
        else:
            print(f"      ✗ Certificate {i} missing")
    score += extra
    print(f"\n   Extra Certifications: {extra}/4  (+{extra} points)\n")

    # === PLAGIARISM & LLM-GENERATED CONTENT CHECK ===
    print("="*70)
    print("   ACADEMIC INTEGRITY / PLAGIARISM CHECK")
    print("="*70)

    integrity_deduct = 0

    print("\n1. Was the 35 Codes assignment scanned with a plagiarism tool?")
    plag_check = input("   → Yes/No → ").strip().lower()
    if plag_check not in ['yes', 'y']:
        print("   ⚠ Warning: No plagiarism report → -2 points (mandatory)")
        integrity_deduct += 2

    print("\n2. Did the plagiarism report show <15% similarity (excluding code templates)?")
    similarity = input("   → Yes/No → ").strip().lower()
    if similarity not in ['yes', 'y']:
        print("   ⚠ High similarity detected → -3 points")
        integrity_deduct += 3

    print("\n3. Was any part of the assignment confirmed to be LLM/AI-generated\n   (e.g. ChatGPT, GitHub Copilot, Grok, etc.) via detector or instructor review?")
    llm_used = input("   → Yes/No → ").strip().lower()
    if llm_used in ['yes', 'y']:
        print("   ❗ AI-generated content detected → Grade capped at 'C' and -4 points")
        integrity_deduct += 4
        ai_flag = True
    else:
        ai_flag = False

    # Apply deductions
    score -= integrity_deduct

    print(f"\nIntegrity Deductions: -{integrity_deduct} points")
    print(f"Score after integrity check: {max(0, score)}/{max_score}")

    # Final Grade Logic
    print("\n" + "="*70)
    if ai_flag:
        final_grade = "C (AI Policy Violation)"
        print("   FINAL GRADE: C → Due to confirmed use of generative AI")
    elif score >= 8:
        final_grade = "A+"
    elif score == 7:
        final_grade = "A"
    elif score >= 6:
        final_grade = "B+"
    elif score >= 5:
        final_grade = "B"
    elif score >= 4:
        final_grade = "C"
    else:
        final_grade = "Incomplete / Fail"

    print(f"   FINAL SCORE: {max(0, score)} / {max_score}")
    print(f"   FINAL GRADE: {final_grade}")
    print("="*70)

    if ai_flag or integrity_deduct > 0:
        print("   ⚠ Note: Case will be reported to academic integrity committee.")
    else:
        print("   ✓ No academic integrity issues detected.")

# Run the system
if __name__ == "__main__":
    grade()
